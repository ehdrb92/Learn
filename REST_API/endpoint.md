RESTful API를 설계하려면 인터넷을 통해 다른 소프트웨어 애플리케이션에서 애플리케이션의 데이터와 기능에 액세스할 수 있는 방법을 정의하는 일련의 가이드라인을 만들어야 합니다. 잘 설계된 RESTful API를 사용하면 개발자가 서비스와 더 쉽게 통합할 수 있고 일관되고 예측 가능한 상호 작용 모델을 보장할 수 있습니다. 다음은 RESTful API의 엔드포인트를 구성하기 위한 몇 가지 팁을 기술적인 세부 사항으로 분류하고 비유를 통해 개념을 보다 쉽게 이해할 수 있도록 설명한 것입니다:

### 1. 리소스 이름에 명사 사용

**기술적 세부 사항**: 엔드포인트는 사용자, 주문, 제품 등 시스템의 엔티티(리소스)를 나타내야 합니다. 복수 명사를 사용하여 엔드포인트가 리소스 컬렉션을 다룬다는 것을 명확히 하세요.

**유추**: 각 리소스를 도서관에 있는 책의 종류처럼 생각하세요. 섹션의 이름을 "ReadBooks" 또는 "CreateBooks"로 지정하지 않는 것처럼 리소스 경로에 동사를 사용하지 마세요. 컬렉션을 지칭할 때는 '책'을 사용하세요.

### 2. HTTP 메서드를 올바르게 활용하기

**기술적 세부 사항**: RESTful API는 리소스에 대해 수행할 작업을 정의하기 위해 표준 HTTP 메서드(동사)를 사용해야 합니다. 주요 메서드는 GET(읽기), POST(만들기), PUT(바꾸기/업데이트), PATCH(부분 업데이트), DELETE입니다.

**비유**: API를 TV의 리모컨이라고 상상해 보세요. 각 버튼(HTTP 메서드)에는 볼륨 높이기(POST, 볼륨 높이기), 채널 변경(PUT, 채널 변경), 음소거(PATCH, 사운드 켜기/끄기 등 상태 부분 변경), 전원 끄기(DELETE, TV 끄기)와 같은 특정 기능이 있습니다.

### 3. API에 버전 관리 포함

**기술적 세부사항**: API 버전 관리는 URI 경로, 쿼리 문자열 또는 헤더에 구현할 수 있습니다. 이를 통해 API 변경으로 인해 기존 클라이언트가 중단되지 않도록 할 수 있습니다.

**비유**: API 버전을 교과서의 판본이라고 생각하세요. 첫 번째 버전(v1)에는 두 번째 버전(v2)에 포함된 일부 정보가 부족할 수 있습니다. 버전을 지정하면 학생들은 학습에 참고할 책을 정확히 알 수 있습니다.

### 4. 중첩을 아껴서 활용하기

**기술적 세부 사항**: 리소스 간의 관계의 경우, 리소스를 중첩할 수 있지만 너무 깊게 중첩하는 것은 피하세요. 경험상 중첩을 한두 단계로 제한하는 것이 좋습니다.

**유추**: 컴퓨터의 파일 구조를 생각해 보세요. 파일이 몇 개의 폴더 안에 정리되어 있는 것은 유용하지만, 문서를 찾기 위해 10개의 폴더를 클릭해야 한다면 너무 복잡해집니다.

### 5. 필터링, 정렬, 페이지 매김, 검색 사용

**기술적 세부 사항**: 이러한 기능은 고객이 리소스의 하위 집합을 요청할 수 있도록 하여 대규모 데이터 세트를 관리하는 데 도움이 됩니다. 필터링은 지정된 기준과 일치하도록 데이터를 제한하고, 정렬은 데이터의 순서를 지정하며, 페이지 매김은 반환되는 데이터의 크기를 제한하고, 검색은 특정 레코드를 찾습니다.

**비유**: 레스토랑 메뉴를 상상해 보세요. 필터링은 채식주의자 요리만 요청하는 것과 같고, 정렬은 가장 저렴한 요리부터 가장 비싼 요리까지 나열하는 것과 같으며, 페이지 매김은 메뉴를 스타터, 메인, 디저트 페이지로 분리하는 것과 같고, 검색은 웨이터에게 특정 재료가 포함된 모든 요리를 가리켜 달라고 요청하는 것과 같습니다.

### 6. 일관된 네이밍 규칙 유지

**기술적 세부 사항**: API의 경로, 쿼리 매개변수, JSON 필드에 일관된 명명 규칙을 사용하세요. 선호도나 조직 표준에 따라 camelCase, snake_case, kebab-case 등을 사용할 수 있습니다.

**유추**: 이름 지정 규칙을 드레스 코드와 같은 것으로 생각하세요. 정장, 캐주얼, 비즈니스 복장 등 어떤 복장이든 일관성을 유지하면 모두가 기대하는 바를 알 수 있고 통일된 모습을 보여줄 수 있습니다.

### 7. HTTPS 사용

**기술적 세부 사항**: 전송 중인 데이터를 암호화하기 위해 HTTP 대신 HTTPS를 사용하여 API를 보호하세요. 이를 통해 민감한 데이터를 도청 및 변조로부터 보호합니다.

**비유**: HTTPS를 사용하는 것은 엽서 대신 잠금장치가 되어 있고 조작이 불가능한 봉투에 편지를 보내는 것과 같습니다. 메시지(데이터)가 전달되는 동안 변경되지 않고 비공개로 유지되도록 보장합니다.

당연하죠! 리소스 URL에서 얕은 수준의 중첩을 유지하는 것은 가독성, 단순성 및 사용 편의성을 향상시키는 RESTful API 설계의 원칙입니다. 이 개념을 기술적인 세부 사항으로 세분화한 다음 비유를 통해 더 명확히 설명해 보겠습니다.

### 기술적 세부 사항

RESTful API의 맥락에서 리소스는 종종 서로 관계가 있습니다. 예를 들어, 블로그 게시물에는 댓글이 있고 사용자에게는 게시물이 있을 수 있습니다. 중첩은 이러한 관계를 API의 URL 구조로 표현하는 방법입니다. 중첩된 URL은 `/users/123/posts/456/comments`와 같이 보일 수 있으며, 이는 사용자 번호 123에 속하는 글 번호 456에 대한 댓글(가장 깊은 수준)을 찾고 있음을 나타냅니다.

중첩은 리소스 간의 관계를 표시하는 데 유용할 수 있지만, 깊은 중첩은 금방 복잡해지고 관리하기 어려워질 수 있습니다. URL이 매우 길고 복잡해져 개발자가 구조를 한 눈에 파악하거나 이러한 URL을 조작하기 어렵게 만들 수 있습니다. 또한 경로가 깊게 중첩되면 이러한 경로를 처리하기 위한 서버 코드가 더 복잡해져 버그나 불일치의 위험이 높아질 수 있습니다.

### 비유: 슈퍼마켓 레이아웃

다양한 섹션(농산물, 유제품, 베이커리 등)이 있는 슈퍼마켓을 생각해 보세요. 각 섹션에는 통로가 있고 각 통로에는 선반이 있습니다. 이 설정은 API 설계의 중첩과 다소 유사한데, 슈퍼마켓은 API, 섹션은 최상위 리소스, 통로는 하위 리소스, 선반은 더 중첩된 하위 리소스입니다.

- **얕은 네스팅**: 이는 마치 슈퍼마켓에서 어느 섹션에나 쉽게 접근할 수 있고 처음 몇 개의 통로에서 원하는 것을 빠르게 찾을 수 있는 것과 같습니다. 달걀이나 빵을 찾기 위해 복잡한 미로 같은 통로를 헤맬 필요가 없습니다. API 용어로 말하면, 중첩을 한두 단계로 제한하여 API를 더 쉽게 이해하고 사용할 수 있다는 뜻입니다. 예를 들어, 사용자를 통해 더 깊게 중첩하는 대신 `/posts/456/comments`를 사용하여 게시물 바로 아래에 있는 댓글에 액세스하는 것입니다.

- **딥 네스팅**: 슈퍼마켓에서 빵집에 가려면 먼저 농산물 코너를 지나고, 그다음에는 유제품 코너를 거쳐야 한다고 상상해 보세요. 쇼핑이 복잡하고 시간이 많이 걸리며 불만스러울 것입니다. API 설계에서도 딥 네스팅은 비슷한 문제를 일으킵니다. URL을 구성하고 해석하기 어렵게 만들고 리소스 간의 직접적인 관계를 모호하게 만들 수 있습니다.

### 결론

RESTful API의 URL에 얕은 수준의 중첩을 유지하면 API의 구조를 명확하고 직관적으로 유지하는 데 도움이 됩니다. 이 접근 방식은 더 나은 개발자 경험을 지원하여 다른 개발자가 API와 더 쉽게 통합할 수 있도록 합니다. 또한 경로를 단순화하여 더 예측 가능하고 문서화 및 유지 관리가 쉬워집니다. 잘 정돈된 슈퍼마켓에서 쇼핑이 쉬워지는 것처럼, 잘 설계된 API는 개발을 더 원활하고 효율적으로 만듭니다.
